/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
plugins {
    id "com.commercehub.gradle.plugin.avro" version "0.9.1"
    id 'java-library'
    id 'maven-publish'
}

sourceCompatibility = 1.8

dependencies {
    api "org.apache.avro:avro:1.9.1"
    testCompile group: 'junit', name: 'junit', version: '4.11'
}

task sourceJar(type: Jar) {
    classifier = 'sources'
//    from sourceSets.main.allJava
    from "$buildDir/generated-main-avro-java"
}

publishing {
    publications {
        strange_zschema_publication_name(MavenPublication) {
            from components.java
            artifact sourceJar
        }
    }
    repositories {
        maven {
            credentials {
                username = "${nexusUsername}"
                password = "${nexusPassword}"
            }

            name = 'nexus1'

            def snapshotUrl = "${nexusUrl}/repository/maven-snapshots"
            def releaseUrl = "${nexusUrl}/repository/maven-releases"

            url = version.endsWith('SNAPSHOT') ? snapshotUrl : releaseUrl
        }
    }
}

avro {
    createSetters = false
    fieldVisibility = "PRIVATE"
}
